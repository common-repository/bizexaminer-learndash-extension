!function(){"use strict";var e={n:function(i){var t=i&&i.__esModule?function(){return i.default}:function(){return i};return e.d(t,{a:t}),t},d:function(i,t){for(var n in t)e.o(t,n)&&!e.o(i,n)&&Object.defineProperty(i,n,{enumerable:!0,get:t[n]})},o:function(e,i){return Object.prototype.hasOwnProperty.call(e,i)}},i=window.jQuery,t=e.n(i);const n="learndash-section-field-error";var a={FIELD_ERROR_CLASS:"learndash-settings-field-error",ERROR_MESSAGE_CLASS:n,ERROR_MESSAGE_SELECTOR:"."+n,LD_FIELD_WRAPPER_SELECTOR:".sfwd_input",ENABLED_FIELD_SELECTOR:"#learndash-quiz-bizexaminer-settings_bizExaminerEnabled",API_CREDENTIALS_FIELD_SELECTOR:"#learndash-quiz-bizexaminer-settings_bizExaminerApiCredentials_field",EXAM_MODULE_FIELD_SELECTOR:"#learndash-quiz-bizexaminer-settings_bizExaminerExamModule",REMOTE_PROCTOR_FIELD_SELECTOR:"#learndash-quiz-bizexaminer-settings_bizExaminerRemoteProctoring"};const{LD_FIELD_WRAPPER_SELECTOR:s,FIELD_ERROR_CLASS:r,ERROR_MESSAGE_SELECTOR:o,ERROR_MESSAGE_CLASS:d}=a,l=e=>{const i=learndash_settings_select2_ajax(e.get(0));return{...i,beforeSend:(t,n)=>{e.parents(s).removeClass(r).find(o).remove(),i.beforeSend&&i.beforeSend()},error:(t,n,a)=>{if(t.responseJSON&&t.responseJSON.data&&t.responseJSON.data.error){const i=t.responseJSON.data.error;e.parents(s).addClass(r).find(".sfwd_option_div").append(`<div class="${d}">${i}</div>`),e.select2("close")}i.error&&i.error()}}},c=e=>{let i=e.attr("placeholder");return void 0!==i&&""!==i||(i=e.find("option[value='']").text()),void 0!==i&&""!==i||(i=e.find("option[value='-1']").text()),void 0!==i&&""!==i||(i="Select an option"),{...learndash_get_base_select2_args(),ajax:l(e),placeholder:i}},{LD_FIELD_WRAPPER_SELECTOR:E,FIELD_ERROR_CLASS:p,ERROR_MESSAGE_SELECTOR:_,API_CREDENTIALS_FIELD_SELECTOR:u,EXAM_MODULE_FIELD_SELECTOR:f,REMOTE_PROCTOR_FIELD_SELECTOR:g}=a;var b=e=>{const i=e.find(u),n=e.find("#learndash-quiz-bizexaminer-settings_bizExaminerApiCredentials"),a=e.find(f),s=e.find(g),r=t()().add(a).add(s),o=n.val(),d=i.hasClass(p);n.on("change",(e=>{const l=n.val();if(""===l||"-1"==l||!l)return i.addClass(p),i.find(_).show(),a.prop("disabled",!0),void s.val("-1").trigger("change").prop("disabled",!0);d&&l===o||(i.removeClass(p),i.find(_).hide()),r.each((function(){const e=t()(this);e.data("select2-query-data",{...e.data("select2-query-data")||{},api_credentials:l}),e.select2(c(e)),e.prop("disabled",!1);const i=e.parents(E);i.removeClass(p),i.find(_).hide()}))})),o&&""!==o&&"-1"!=o&&!d||(a.prop("disabled",!0),s.prop("disabled",!0))};const{FIELD_ERROR_CLASS:h,API_CREDENTIALS_FIELD_SELECTOR:R,EXAM_MODULE_FIELD_SELECTOR:S,LD_FIELD_WRAPPER_SELECTOR:v,ERROR_MESSAGE_SELECTOR:L}=a,{ENABLED_FIELD_SELECTOR:m}=a;let O=t()();const C=e=>{const{incompatibleSettings:i,builderTabHelpText:n}=window.bizExaminerQuizSettings,a=e.find(m),s=(e,i,n)=>{const{type:a,value:s,fieldGroups:r}=i;let o=!1;"checkbox"===a&&(o="on"===s&&e.prop("checked")||"off"===s&&!e.prop("checked")),Object.keys(r).forEach((e=>{const i=r[e];Object.keys(i).forEach((a=>{const s=i[a];!function(e,i,n,a){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];const r=t()(`[name="learndash-quiz-${i}[${n}]"]`);if(!r.length)return;O=O.add(r);const o=r.parents(".sfwd_input");if(o.toggleClass("bizexaminer-incompatible",e),r.prop("disabled",e).addClass("bizexaminer-disabled"),e){switch(a.type){case"checkbox":r.prop("checked","on"===a.reset_value).trigger("change").trigger("click");break;case"select":r.find(`option[value="${a.reset_value}"]`).length||r.append(t()(`<option value="${a.reset_value}">${a.reset_value_label||a.reset_value}</option>`)),r.val(a.reset_value).trigger("change").trigger("click");break;case"radio":r.filter(`[value="${a.reset_value}"]`).prop("checked",!0).trigger("click");break;default:r.val(a.reset_value)}const e=o.find(".sfwd_option_input").first();e.find(".bizexaminer-incompatible-message").length||e.append(`<p class="bizexaminer-incompatible-message">${a.help_text}</p>`)}else o.find(".bizexaminer-incompatible-message").remove(),"select"===a.type&&(s&&r.val(0),r.trigger("change").trigger("click"));const d=t()(`.ld-settings-sub[data-parent-field="learndash-quiz-${i}_${n}_field"]`);d.toggleClass("bizexaminer-incompatible",e),d.find("input,select,textarea,button").prop("disabled",e)}(o,e,a,s,n)}))}))};Object.keys(i).forEach((e=>{const n=t()(`input[name="learndash-quiz-bizexaminer-settings[${e}]"]`);n.on("change",(function(){s(t()(this),i[e],!0)})),a.on("change",(function(){s(n,i[e],!1)})),s(n,i[e],!1)}));const r=()=>{const e=!!a.prop("checked"),i=e;t()("#tab-learndash_quiz_builder").prop("disabled",i).attr("title",i?n:""),e&&i&&t()("#tab-sfwd-quiz-settings").trigger("click")};a.on("change",r),r()};const{LD_FIELD_WRAPPER_SELECTOR:z,REMOTE_PROCTOR_FIELD_SELECTOR:x}=a;var w=e=>{e.find("[data-biz-show-if]").each((function(){const i=t()(this),n=i.parents(".sfwd_input"),a=i.data("biz-show-if"),s=e.find(`[name="learndash-quiz-bizexaminer-settings[${a}]"]`);if(!s.length)return;const r=()=>{s.is(":checked")?n.show():(i.is("input")?"checkbox"===i.prop("type")?i.prop("checked",!1):"radio"===i.prop("type")||i.val("").trigger("change").trigger("click"):i.is("select")&&i.val("").trigger("change").trigger("click"),n.hide())};r(),s.on("change",r)}))},D=e=>{e.find('select[data-ld-select2="1"][data-select2-query-data]').each((function(){const e=t()(this);e.select2(c(e))}))};t()((()=>{if(!window.bizExaminerQuizSettings)return;const e=t()(".learndash-quiz-bizexaminer-settings");e.find(".learndash-settings-field-error .learndash-section-field-error").show(),b(e),(e=>{const i=e.find(S),t=i.parents(v),n=e.find(R).hasClass(h),a=i.val();i.on("change",(e=>{const s=i.val();""!==s&&"-1"!=s&&s?n&&s===a||(t.removeClass(h),t.find(L).hide()):(t.addClass(h),t.find(L).show())}));const s=i.data("select2-query-data");if(!s.be_selected_value)return;const r=s.be_selected_value,o=i.find(`option[value="${r}"]`);o.length&&(o.prop("selected",!0),i.trigger("change"))})(e),(e=>{const i=e.find(x),t=e.find("[data-bizexaminer-proctor]");t.parents(z).addClass("bizexaminer-remote-proctor-setting-field");const n=e=>{if(t.parents(z).hide(),!e)return void t.parents(z).hide();const i=e.split("_-_");if(i.length<2)return void t.filter("[data-bizexaminer-proctor]").parents(z).hide();const n=i[0];t.filter(`[data-bizexaminer-proctor="${n}"]`).parents(z).show()};i.on("change",(()=>{n(i.val())})),n(i.val())})(e),w(e),(e=>{window.bizExaminerQuizSettings.incompatibleSettings&&(C(e),(()=>{const e=()=>{O.filter(":disabled").addClass("bizexaminer-saving").prop("disabled",!1).prop("readonly",!0)},i=()=>{O.filter(".bizexaminer-saving").removeClass("bizexaminer-saving").prop("disabled",!0).prop("readonly",!1)};let n=!1,a=!1,s=null;if(window.wp.blocks)window.wp.data.subscribe((()=>{const t=window.wp.data.select("core/edit-post").isSavingMetaBoxes(),s=n&&!t;t&&!a&&(e(),a=!0),s&&(a=!1,i()),n=t}));else{const n=()=>{s&&clearTimeout(s),e(),s=setTimeout(i,3e3)};t()("#wpProQuiz_save,input[name=save]").on("click",n),t()("#publish").on("click",n),t()("#save-post").on("click",n)}})())})(e),D(e)}))}();